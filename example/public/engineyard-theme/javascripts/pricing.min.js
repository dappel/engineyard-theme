var pricing={plan:{usEast:{unitPrice:[0.12,0.47,0.93,0.23,0.93,0.69,1.37,2.74],computeHoursMultiple:720,ebsStorageIo:0.1,ebsStorage:0.1,s3Space:0.14,s3XferIn:0.1,s3XferOut:0.15,s3Puts:0.01,s3Gets:0.01,bandwidthIn:0.1,bandwidthOut:0.15},usWest:{unitPrice:[0.2,0.47,0.93,0.23,0.93,0.69,1.37,2.74],computeHoursMultiple:720,ebsStorageIo:0.11,ebsStorage:0.11,s3Space:0.154,s3XferIn:0.1,s3XferOut:0.15,s3Puts:0.011,s3Gets:0.011,bandwidthIn:0.1,bandwidthOut:0.15},europe:{unitPrice:[0.2,0.47,0.93,0.23,0.93,0.69,
1.37,2.74],computeHoursMultiple:720,ebsStorageIo:0.11,ebsStorage:0.11,s3Space:0.14,s3XferIn:0.1,s3XferOut:0.15,s3Puts:0.01,s3Gets:0.01,bandwidthIn:0.1,bandwidthOut:0.15},apac:{unitPrice:[0.2,0.47,0.93,0.23,0.93,0.69,1.37,2.74],computeHoursMultiple:720,ebsStorageIo:0.11,ebsStorage:0.11,s3Space:0.14,s3XferIn:0.1,s3XferOut:0.19,s3Puts:0.01,s3Gets:0.01,bandwidthIn:0.1,bandwidthOut:0.19},japan:{unitPrice:[0.2,0.47,0.93,0.23,0.93,0.69,1.37,2.74],computeHoursMultiple:720,ebsStorageIo:0.12,ebsStorage:0.12,
s3Space:0.15,s3XferIn:0.1,s3XferOut:0.201,s3Puts:0.01,s3Gets:0.01,bandwidthIn:0.1,bandwidthOut:0.201}},standardSupportTier:[275,375,575,975,2150],additionalStandardSupport:425,premiumSupportTier:[475,625,975,1675,3575],additionalPremiumSupport:725,maxPageviews:1E6,maxPagesize:2E3,init:function(){pricing.region="usEast";pricing.planMin=0;pricing.totalServers=0;pricing.maxServers=20;$("#region").change(function(){pricing.updateRegion(this.value)});$("#servers .minus").click(function(){var a=$(this).parent().children("input"),
b=parseInt(a.val())-1;a.val(b);pricing.update()});$("#servers .plus").click(function(){var a=$(this).parent().children("input"),b=parseInt(a.val())+1;a.val(b);pricing.update()});$("#servers input").change(function(){pricing.update()});$("input[name='support_group']").change(function(){pricing.update()});$("#pageviews_widget").slider({value:1E3,min:0,max:pricing.maxPageviews,step:1E4,slide:function(a,b){$("#pageviews").val(pricing.formatValue(b.value))},change:pricing.update,animate:!0});$("#pagesize_widget").slider({value:300,
min:0,max:pricing.maxPagesize,step:100,slide:function(a,b){$("#pagesize").val(pricing.formatValue(b.value)+"Kbs")},change:pricing.update,animate:!0});$("#total_backups_widget").slider({value:1,min:1,max:30,step:1,slide:function(a,b){$("#total_backups").val(b.value)},change:pricing.update,animate:!0});$("#backup_frequency_widget").slider({value:0,min:0,max:5,step:1,slide:function(a,b){b.value==5?$("#backup_frequency").val("every hour"):b.value==4?$("#backup_frequency").val("every 2 hours"):b.value==
3?$("#backup_frequency").val("every 6 hours"):b.value==2?$("#backup_frequency").val("twice a day"):b.value==1?$("#backup_frequency").val("once a day"):b.value==0&&$("#backup_frequency").val("never")},change:pricing.update,animate:!0});pricing.update()},update:function(){$("#console").html("");var a=0;$("#servers input").each(function(b){pricing.totalServers>pricing.maxServers?$(this).val(0):a+=parseInt($(this).val());$(this).val()!=0?$("#servers .minus")[b].disabled=!1:$("#servers .minus")[b].disabled=
!0});$("#backup_frequency_widget").slider("value")<=0?($("#total_backups_widget").slider("disable"),$("#total_backups_widget").fadeTo("slow",0.4)):($("#total_backups_widget").slider("enable"),$("#total_backups_widget").fadeTo("slow",1));pricing.totalServers=a;$("#servers_remaining").html(a);a==pricing.maxServers?$("#servers .plus").attr("disabled",!0):$("#servers .plus").attr("disabled",!1);var b=pricing.plan[pricing.region],d=0,e=pricing.totalServers*b.computeHoursMultiple,g=0,c=0;$("input.number").each(function(a){d+=
parseInt($(this).val())*720*b.unitPrice[a]});if(pricing.totalServers){var g=[0,1,2,6,12,24][$("#backup_frequency_widget").slider("value")],f=$("#pageviews").val().replace(/\$|\,/g,""),h=$("#pagesize").val().replace(/\$|\,/g,""),c=parseInt($("#total_backups").val())<=0||g<=0?0:parseInt(f)<=0?parseInt(Math.log(1))*(parseInt(h)/300)*Math.log(g*parseInt($("#total_backups").val()))/1.5+1:parseInt(Math.log(f))*(parseInt(h)/300)*Math.log(g*parseInt($("#total_backups").val()))/1.5+1,f=parseInt(f)>0?parseInt(h)/
300*(parseInt(Math.sqrt(f))/10):0,h=c/5;d+=h*b.ebsStorage;d+=c*b.ebsStorageIo;d+=h/2*b.s3Space;d+=c/6*b.s3XferIn;d+=c/20*b.s3XferOut;d+=g*6*b.s3Puts;d+=g*b.s3Gets;d+=f*b.bandwidthIn;d+=f*10*b.bandwidthOut;c=0;e>2500&&e<=5E3?c=1:e>5E3&&e<=1E4?c=2:e>1E4&&e<=2E4?c=3:e>2E4&&e<=5E4?c=4:e>5E4&&(c=4);g=pricing.standardSupportTier[c];c=pricing.premiumSupportTier[c]}d<pricing.planMin?(g=pricing.standardSupportTier[0],d=pricing.planMin,$("#total p").html("*monthly<br/>minimum")):$("#total p").html("");e=$("input[name='support_group']:checked").val();
f=0;pricing.totalServers>0?($("#standard_support_total").html(pricing.formatTotal(g)+" Month"),$("#premium_support_total").html(pricing.formatTotal(c)+" Month"),e=="standard"?f=g:e=="premium"&&(f=c)):($("#standard_support_total").html("&mdash;"),$("#premium_support_total").html("&mdash;"));$("#total #estimate").html(pricing.formatTotal(d+f))},updateRegion:function(a){pricing.region=a;pricing.update()},formatTotal:function(a){a=a.toString().replace(/\$|\,/g,"");dblValue=parseFloat(a);blnSign=dblValue==
(dblValue=Math.abs(dblValue));dblValue=Math.floor(dblValue*100+0.50000000001);intCents=dblValue%100;strCents=intCents.toString();dblValue=Math.floor(dblValue/100).toString();intCents<10&&(strCents="0"+strCents);for(a=0;a<Math.floor((dblValue.length-(1+a))/3);a++)dblValue=dblValue.substring(0,dblValue.length-(4*a+3))+","+dblValue.substring(dblValue.length-(4*a+3));return(blnSign?"":"-")+"$"+dblValue+"."+strCents},formatValue:function(a){a=a.toString().replace(/\$|\,/g,"");dblValue=parseFloat(a);blnSign=
dblValue==(dblValue=Math.abs(dblValue));dblValue=Math.floor(dblValue*100);intCents=dblValue%100;strCents=intCents.toString();dblValue=Math.floor(dblValue/100).toString();for(a=0;a<Math.floor((dblValue.length-(1+a))/3);a++)dblValue=dblValue.substring(0,dblValue.length-(4*a+3))+","+dblValue.substring(dblValue.length-(4*a+3));return(blnSign?"":"-")+dblValue}},estimator={serverName:["Small","Medium","Large"],serverPrice:[0.12,0.23,0.47],computeHours:720,maxServers:20,priceAdj:1.075,select_default:function(){units=
1;database=0;$("#server_size input[name='server_size']:checked").val(1);$("#dedicated_db").removeAttr("checked");estimator.update()},init:function(){$("#estimator input").change(function(){$("#servers").val()>estimator.maxServers?(units=estimator.maxServers,$("#servers").val(units)):units=$("#servers").val();database=$("#dedicated_db:checked").val()?1:0;$("#configuration li").removeClass("selected");estimator.update()});$("#servers").keydown(function(a){a.keyCode==46||a.keyCode==8||a.keyCode==9||
a.keyCode>=48&&a.keyCode<=57||a.keyCode>=96&&a.keyCode<=105||a.preventDefault()});$("#shared").click(function(){units=1;database=0;$("#dedicated_db").removeAttr("checked");estimator.update(!0)});$("#dedicated").click(function(){database=units=1;$("#dedicated_db").attr("checked","checked");estimator.update(!0)});$("#cluster").click(function(){units=2;database=1;$("#dedicated_db").attr("checked","checked");estimator.update(!0)});$("#configuration li").click(function(){$(this).parent().children("li").removeClass("selected");
$(this).addClass("selected")});$(".preset").click(function(){$(this).addClass("selected");$(".custom").removeClass("selected");$(".price_sheet").removeClass("selected");$(".faqs").removeClass("selected");$("#configuration").removeClass("hidden");$("#price_sheet").addClass("hidden");$("#faqs").addClass("hidden");$("#customize").addClass("hidden")});$(".custom").click(function(){$(this).addClass("selected");$(".preset").removeClass("selected");$(".price_sheet").removeClass("selected");$(".faqs").removeClass("selected");
$("#configuration").addClass("hidden");$("#price_sheet").addClass("hidden");$("#faqs").addClass("hidden");$("#customize").removeClass("hidden")});$(".price_sheet").click(function(){$(this).addClass("selected");$(".preset").removeClass("selected");$(".custom").removeClass("selected");$(".faqs").removeClass("selected");$("#configuration").addClass("hidden");$("#customize").addClass("hidden");$("#faqs").addClass("hidden");$("#price_sheet").removeClass("hidden")});$(".faqs").click(function(){$(this).addClass("selected");
$(".preset").removeClass("selected");$(".custom").removeClass("selected");$(".price_sheet").removeClass("selected");$("#configuration").addClass("hidden");$("#customize").addClass("hidden");$("#price_sheet").addClass("hidden");$("#faqs").removeClass("hidden")})},update_ui:function(){$("#servers").val(units);$("#small_server").attr("checked","checked")},update:function(a){a&&estimator.update_ui();var a=$("#server_size input[name='server_size']:checked").val(),b=(estimator.serverPrice[a]*units+estimator.serverPrice[a]*
database)*estimator.computeHours,d=b*estimator.priceAdj;$("#total").html(estimator.formatTotal(d));$(".detail_server_count").html(units);$(".detail_server_size").html(estimator.serverName[a]);$(".detail_server_cost").html(estimator.serverPrice[a]*100);$(".server_subtotal").html(estimator.formatTotal(estimator.serverPrice[a]*units*estimator.computeHours));$(".db_server_count").html(database);$(".db_subtotal").html("+ "+estimator.formatTotal(estimator.serverPrice[a]*database*estimator.computeHours));
$(".priceAdj").html("+ "+estimator.formatTotal(b*(estimator.priceAdj-1)));database!=0?$(".has_db").html("+ 1 "+estimator.serverName[a]+" dedicated database instance"):$(".has_db").html("")},formatTotal:function(a){a=a.toString().replace(/\$|\,/g,"");dblValue=parseFloat(a);blnSign=dblValue==(dblValue=Math.abs(dblValue));dblValue=Math.floor(dblValue*100+0.50000000001);intCents=dblValue%100;strCents=intCents.toString();dblValue=Math.floor(dblValue/100).toString();intCents<10&&(strCents="0"+strCents);
for(a=0;a<Math.floor((dblValue.length-(1+a))/3);a++)dblValue=dblValue.substring(0,dblValue.length-(4*a+3))+","+dblValue.substring(dblValue.length-(4*a+3));return(blnSign?"":"-")+"$"+dblValue+"."+strCents}};